$(document).ready(function(){var e=10;var k=20;var m="ARS";var f="Gray";var d=0;var g;if($("body").hasClass("large")){g=true}else{g=false}function b(){this.Playfields=new Array();this.current_playfield;this.init=function(){this.Playfields.push(new l());this.current_playfield=this.Playfields.length-1;this.Playfields[0].init();var i="";i+='<div id="top-box">';i+='<div id="holdbox"></div>';i+='<div id="next1box"></div>';i+='<div id="next2box"></div>';i+='<div id="next3box"></div>';i+="</div>";$("#seed").prepend(i)};this.new_playfield=function(){this.Playfields.splice(this.current_playfield+1,0,new l());this.current_playfield+=1;this.Playfields[this.current_playfield].init();this.update_framecount()};this.update_framecount=function(){$("#current-frame").html(this.current_playfield+1);$("#total-frame").html(this.Playfields.length)};this.update_topbox=function(){$("#holdbox").fadeOut(200).attr("class","holdbox").addClass("hold-"+this.Playfields[this.current_playfield].hold).fadeIn(200);$("#next1box").fadeOut(200).attr("class","next1box").addClass("next1-"+this.Playfields[this.current_playfield].next1).fadeIn(200);$("#next2box").fadeOut(200).attr("class","next2box").addClass("next2-"+this.Playfields[this.current_playfield].next2).fadeIn(200);$("#next3box").fadeOut(200).attr("class","next3box").addClass("next3-"+this.Playfields[this.current_playfield].next3).fadeIn(200)};this.update_system=function(){if(g){if(this.Playfields[this.current_playfield].system){$("#style-blocks").attr("href","ressources/"+this.Playfields[this.current_playfield].system+".css")}else{$("#style-blocks").attr("href","ressources/ARS.css")}}else{if(this.Playfields[this.current_playfield].system){$("#style-blocks").attr("href","ressources/mini-"+this.Playfields[this.current_playfield].system+".css")}else{$("#style-blocks").attr("href","ressources/mini-ARS.css")}}};this.next_playfield=function(){if(this.current_playfield+1<this.Playfields.length){$("#d"+this.current_playfield).fadeOut(200);this.current_playfield+=1;$("#d"+this.current_playfield).delay(200).fadeIn(200);this.update_framecount();this.update_topbox();this.update_system();$("#com").fadeOut(200).html(this.Playfields[this.current_playfield].comment).fadeIn(200)}};this.previous_playfield=function(){if(this.current_playfield-1>=0){$("#d"+this.current_playfield).fadeOut(200);this.current_playfield-=1;this.update_framecount();this.update_topbox();this.update_system();$("#d"+this.current_playfield).delay(200).fadeIn(200);$("#com").fadeOut(200).html(this.Playfields[this.current_playfield].comment).fadeIn(200)}};this.first_playfield=function(){if(this.current_playfield!=0){$("#d"+this.current_playfield).fadeOut(200);this.current_playfield=0;$("#d"+this.current_playfield).delay(200).fadeIn(200);this.update_framecount();this.update_topbox();this.update_system();$("#com").fadeOut(200).html(this.Playfields[this.current_playfield].comment).fadeIn(200)}};this.last_playfield=function(){if(this.current_playfield!=this.Playfields.length-1){$("#d"+this.current_playfield).fadeOut(200);this.current_playfield=this.Playfields.length-1;$("#d"+this.current_playfield).delay(200).fadeIn(200);this.update_framecount();this.update_topbox();this.update_system();$("#com").fadeOut(200).delay(200).html(this.Playfields[this.current_playfield].comment).fadeIn(200)}};this.print=function(){var o="";for(var n=0;n<this.Playfields.length;n++){o+=this.Playfields[n].print()}return o};this.load=function(n){if(!n){return}var p=n.split("+");for(var o=0;o<p.length-1;o++){this.Playfields[this.current_playfield].load_pf(p[o]);if(o<p.length-2){this.new_playfield()}}}}function l(){this.pf_width=e;this.pf_height=k;this.comment="";this.Tetrion=new Array();this.system=m;this.stackborder_status;this.border_color=f;this.hold="";this.next1="";this.next2="";this.next3="";this.the_active_center=new Array();this.the_active_center.coord="";this.the_active_center.piece="";this.Tetrion_History=new Array();this.init=function(){for(var o=0;o<this.pf_width;o++){this.Tetrion.push(new Array(26));for(var n=0;n<this.pf_height;n++){this.Tetrion[o][n]=new Array();this.Tetrion[o][n]["content"]="_";this.Tetrion[o][n]["content_active"]="";this.Tetrion[o][n]["decoration"]=""}}};this.modify=function(i,o,n){this.Tetrion[i][o]["content"]=n};this.modify_active=function(i,o,n){this.Tetrion[i][o]["content_active"]=n};this.modify_active_center=function(i,o,n){this.the_active_center.coord=i+"x"+o;this.the_active_center.piece=n};this.modify_decoration=function(i,o,n){this.Tetrion[i][o]["decoration"]=n};this.modify_system=function(i){this.system=i};this.modify_border=function(i){this.border_color=i};this.modify_hold=function(i){this.hold=i};this.modify_next1=function(i){this.next1=i};this.modify_next2=function(i){this.next2=i};this.modify_next3=function(i){this.next3=i};this.change_size=function(i,n){if(this.pf_height!=n||this.pf_width!=i){this.pf_height=n;this.pf_width=i;e=i;k=n}};this.load_pf=function(y){if(!y){return}var D=y.split("_");for(var A=0;A<D.length;A++){if(D[A].charAt(0)=="*"){switch(D[A].charAt(1)){case"s":var C=D[A].slice(2).split("x");var q=parseFloat(C[0]);var B=parseFloat(C[1]);this.change_size(q,B);break;case"r":this.modify_system(D[A].slice(2));break;case"b":this.modify_border(D[A].slice(2));break;case"h":this.modify_hold(D[A].slice(2));break;case"n":this.modify_next1(D[A].slice(2));break;case"m":this.modify_next2(D[A].slice(2));break;case"o":this.modify_next3(D[A].slice(2));break;case"g":var o=D[A].slice(2).split("-");var t;var r;for(var z=0;z<o.length-1;z++){t=alphanumconvert(o[z].charAt(0));r=alphanumconvert(o[z].charAt(1));this.modify(t,r,o[z].slice(2))}break;case"d":var o=D[A].slice(2).split("-");var t;var r;for(var z=0;z<o.length-1;z++){t=alphanumconvert(o[z].charAt(0));r=alphanumconvert(o[z].charAt(1));this.modify_decoration(t,r,o[z].slice(2))}break;case"a":var n=D[A].slice(2).split("-");var E=new Array;E.x=alphanumconvert(n[0].charAt(0));E.y=alphanumconvert(n[0].charAt(1));var x=n[1].slice(0,1);var s=n[1];var p=get_orientation(s,E,this.system);var w=new Array();var v=new Array();var u=new Array();w.x=p[0].x;w.y=p[0].y;v.x=p[1].x;v.y=p[1].y;u.x=p[2].x;u.y=p[2].y;if(s=="T"||s=="L"||s=="J"||s=="S"||s=="Z"||s=="I"||s=="G"||s=="single"){w.x=E.x;w.y=E.y;v.x=E.x;v.y=E.y;u.x=E.x;u.y=E.y}this.modify_active(E.x,E.y,x);this.modify_active_center(E.x,E.y,s);this.modify_active(w.x,w.y,x);this.modify_active(v.x,v.y,x);this.modify_active(u.x,u.y,x);break;case"c":this.comment=Base64.decode(decodeURIComponent(D[A].slice(2)));this.comment=this.comment.replace("<strong>","html-strong-begin");this.comment=this.comment.replace("</strong>","html-strong-end");this.comment=this.comment.replace("<em>","html-em-begin");this.comment=this.comment.replace("</em>","html-em-end");this.comment=this.comment.replace("<a","html-a-begin");this.comment=this.comment.replace("</a>","html-a-end");this.comment=this.comment.replace(/<(.|\n)*?>/,"");this.comment;this.comment=this.comment.replace("html-strong-begin","<strong>");this.comment=this.comment.replace("html-strong-end","</strong>");this.comment=this.comment.replace("html-em-begin","<em>");this.comment=this.comment.replace("html-em-end","</em>");this.comment=this.comment.replace("html-a-begin","<a");this.comment=this.comment.replace("html-a-end","</a>");break;case"w":this.stackborder_status=1;break}}}};this.print=function(){var o="";var p="";var w="";var u="";var r="";var n="";var v="foreground-inactive";var q='<table id="d'+d+'" class="diagram border-'+this.border_color+'"> \n';d++;for(var s=0;s<this.pf_height;s++){q+='<tr class="row'+s+'">';for(var t=0;t<this.pf_width;t++){if(this.Tetrion[t][s]["decoration"]){v="";w=this.Tetrion[t][s]["decoration"]}if(this.Tetrion[t][s]["content_active"]){v="foreground-inactive";p="piece-"+this.Tetrion[t][s]["content_active"];r="hasactive";if(this.Tetrion[t][s]["content"]){v=""}}if(this.Tetrion[t][s]["content"]!="_"){v="foreground-inactive";u="hasinactive";o="piece-"+this.Tetrion[t][s]["content"]}if(this.stackborder_status){if(this.Tetrion[t][s]["content"]=="_"){n+="border-";if(s-1>=0&&this.Tetrion[t][s-1]["content"]!="_"){n+="top"}if(t+1<this.pf_width&&this.Tetrion[t+1][s]["content"]!="_"){n+="right"}if(s+1<this.pf_height&&this.Tetrion[t][s+1]["content"]!="_"){n+="bottom"}if(t-1>=0&&this.Tetrion[t-1][s]["content"]!="_"){n+="left"}}}q+='<td class="col'+t+" "+v+" "+u+" "+r+'">';q+='<div class="inactivelayer '+o+'">';q+='<div class="pixelborder '+n+'">';q+='<div class="activelayer '+p+'">';q+='<div class="decorationlayer '+w+'">';q+="</div></div></div></div></td>";o="";p="";w="";u="";r="";n="";v="foreground-inactive"}q+="</tr> \n"}return q}}var a=new b();a.init();var j=window.location.search;if(j){var c=j.split("?");a.load(c[1]);$(a.print()).appendTo("#seed");$("#com").html(a.Playfields[a.current_playfield].comment);if(a.Playfields.length>1){for(var h=0;h<a.Playfields.length;h++){$("#d"+h).hide()}a.first_playfield()}$("#holdbox").attr("class","holdbox").addClass("hold-"+a.Playfields[a.current_playfield].hold);$("#next1box").attr("class","next1box").addClass("next1-"+a.Playfields[a.current_playfield].next1);$("#next2box").attr("class","next2box").addClass("next2-"+a.Playfields[a.current_playfield].next2);$("#next3box").attr("class","next3box").addClass("next3-"+a.Playfields[a.current_playfield].next3);a.update_system()}$("#cmd_next").click(function(){a.next_playfield()});$("#cmd_prev").click(function(){a.previous_playfield()});$("#cmd_last").click(function(){a.last_playfield()});$("#cmd_first").click(function(){a.first_playfield()})});function alphanumconvert(b){var a;switch(b){case"a":a=0;break;case"b":a=1;break;case"c":a=2;break;case"d":a=3;break;case"e":a=4;break;case"f":a=5;break;case"g":a=6;break;case"h":a=7;break;case"i":a=8;break;case"j":a=9;break;case"k":a=10;break;case"l":a=11;break;case"m":a=12;break;case"n":a=13;break;case"o":a=14;break;case"p":a=15;break;case"q":a=16;break;case"r":a=17;break;case"s":a=18;break;case"t":a=19;break;case 0:a="a";break;case 1:a="b";break;case 2:a="c";break;case 3:a="d";break;case 4:a="e";break;case 5:a="f";break;case 6:a="g";break;case 7:a="h";break;case 8:a="i";break;case 9:a="j";break;case 10:a="k";break;case 11:a="l";break;case 12:a="m";break;case 13:a="n";break;case 14:a="o";break;case 15:a="p";break;case 16:a="q";break;case 17:a="r";break;case 18:a="s";break;case 19:a="t";break}return a}function get_orientation(f,a,g){var e=new Array();var d=new Array();var c=new Array();switch(g){case"ARS":switch(f){case"Ti":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Tccw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Tcw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Tu":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Ii":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-2;c.y=parseFloat(a.y)+0;break;case"Iccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-2;break;case"Iu":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-2;c.y=parseFloat(a.y)+0;break;case"Icw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-2;break;case"Oi":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ocw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ou":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Occw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Zi":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Zcw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Zu":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Zccw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Si":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Scw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Su":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Sccw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Li":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Lccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Lcw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)-1;break;case"Lu":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ji":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Jccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Jcw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Ju":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)-1;break;default:e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+0;break}break;case"SRS":switch(f){case"Ti":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Tcw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Tu":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Tccw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Ii":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-2;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Icw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+2;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Iu":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-2;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Iccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+2;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Oi":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ocw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ou":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Occw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Si":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+0;break;case"Scw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Su":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Sccw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Zi":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Zcw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Zu":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Zccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Li":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Lcw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Lu":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Lccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Ji":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Jcw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Ju":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Jccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;default:e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+0;break}break;default:switch(f){case"Ti":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Tccw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Tcw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Tu":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-1;break;case"Ii":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-2;c.y=parseFloat(a.y)+0;break;case"Iccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-2;break;case"Iu":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-2;c.y=parseFloat(a.y)+0;break;case"Icw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)-2;break;case"Oi":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ocw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ou":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Occw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Zi":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Zcw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Zu":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Zccw":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Si":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Scw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Su":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Sccw":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+1;break;case"Li":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+0;break;case"Lccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Lcw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)-1;break;case"Lu":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Ji":e.x=parseFloat(a.x)+1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)-1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)+1;break;case"Jccw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)-1;c.x=parseFloat(a.x)+1;c.y=parseFloat(a.y)-1;break;case"Jcw":e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)-1;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+1;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)+1;break;case"Ju":e.x=parseFloat(a.x)-1;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+1;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)-1;c.y=parseFloat(a.y)-1;break;default:e.x=parseFloat(a.x)+0;e.y=parseFloat(a.y)+0;d.x=parseFloat(a.x)+0;d.y=parseFloat(a.y)+0;c.x=parseFloat(a.x)+0;c.y=parseFloat(a.y)+0;break}break}var b=[e,d,c];return b}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};